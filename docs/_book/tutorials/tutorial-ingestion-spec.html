
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>编写数据摄入规则 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-auto-scroll-table/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="tutorial-transform-spec.html" />
    
    
    <link rel="prev" href="tutorial-delete-data.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    前言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    开始
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../design/">
            
                <a href="../design/">
            
                    
                    Apache Druid简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="./">
            
                <a href="./">
            
                    
                    快速入门
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="docker.html">
            
                <a href="docker.html">
            
                    
                    Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../operations/single-server.html">
            
                <a href="../operations/single-server.html">
            
                    
                    单机部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="cluster.html">
            
                <a href="cluster.html">
            
                    
                    集群模式部署
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    指南
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="tutorial-batch.html">
            
                <a href="tutorial-batch.html">
            
                    
                    从本地文件摄入数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="tutorial-kafka.html">
            
                <a href="tutorial-kafka.html">
            
                    
                    从Kafka摄入数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="tutorial-batch-hadoop.html">
            
                <a href="tutorial-batch-hadoop.html">
            
                    
                    从Haddop摄入数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="tutorial-query.html">
            
                <a href="tutorial-query.html">
            
                    
                    查询数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="tutorial-rollup.html">
            
                <a href="tutorial-rollup.html">
            
                    
                    预聚合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="tutorial-retention.html">
            
                <a href="tutorial-retention.html">
            
                    
                    数据留存规则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="tutorial-update-data.html">
            
                <a href="tutorial-update-data.html">
            
                    
                    更新数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="tutorial-compaction.html">
            
                <a href="tutorial-compaction.html">
            
                    
                    数据文件合并
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="tutorial-delete-data.html">
            
                <a href="tutorial-delete-data.html">
            
                    
                    删除数据
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.10" data-path="tutorial-ingestion-spec.html">
            
                <a href="tutorial-ingestion-spec.html">
            
                    
                    编写数据摄入规则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="tutorial-transform-spec.html">
            
                <a href="tutorial-transform-spec.html">
            
                    
                    转换摄入数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="tutorial-kerberos-hadoop.html">
            
                <a href="tutorial-kerberos-hadoop.html">
            
                    
                    设置Kerberos认证的HDFS作为深度存储
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    设计
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../design/architecture.html">
            
                <a href="../design/architecture.html">
            
                    
                    整体架构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../design/segments.html">
            
                <a href="../design/segments.html">
            
                    
                    存储结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../design/processes">
            
                <span>
            
                    
                    进程与服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../dependencies/deep-storage.html">
            
                <a href="../dependencies/deep-storage.html">
            
                    
                    深度存储
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../dependencies/metadata-storage.html">
            
                <a href="../dependencies/metadata-storage.html">
            
                    
                    元数据存储
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../dependencies/zookeeper.html">
            
                <a href="../dependencies/zookeeper.html">
            
                    
                    Zookeeper
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    数据摄入
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../ingestion/">
            
                <a href="../ingestion/">
            
                    
                    概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../ingestion/data-formats.html">
            
                <a href="../ingestion/data-formats.html">
            
                    
                    数据格式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../ingestion/schema-design.html">
            
                <a href="../ingestion/schema-design.html">
            
                    
                    Schema定义
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../ingestion/data-management.html">
            
                <a href="../ingestion/data-management.html">
            
                    
                    数据管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" >
            
                <span>
            
                    
                    实时摄入
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.5.1" data-path="../development/extensions-core/kafka-ingestion.html">
            
                <a href="../development/extensions-core/kafka-ingestion.html">
            
                    
                    从Kafka摄入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5.2" data-path="../development/extensions-core/kinesis-ingestion.html">
            
                <a href="../development/extensions-core/kinesis-ingestion.html">
            
                    
                    从Amazon Kinesis摄入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5.3" data-path="../ingestion/tranquility.html">
            
                <a href="../ingestion/tranquility.html">
            
                    
                    从Tranqulity摄入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5.4" data-path="../ingestion/standalone-realtime.html">
            
                <a href="../ingestion/standalone-realtime.html">
            
                    
                    独立实时模式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.6" >
            
                <span>
            
                    
                    批量导入
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.6.1" data-path="../ingestion/native-batch.html">
            
                <a href="../ingestion/native-batch.html">
            
                    
                    本地模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6.2" data-path="../ingestion/hadoop.html">
            
                <a href="../ingestion/hadoop.html">
            
                    
                    从Hadoop导入
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../ingestion/tasks.html">
            
                <a href="../ingestion/tasks.html">
            
                    
                    Druid中的任务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../ingestion/faq.html">
            
                <a href="../ingestion/faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    数据查询
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../querying/sql.html">
            
                <a href="../querying/sql.html">
            
                    
                    通过SQL查询
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../querying/querying.html">
            
                <a href="../querying/querying.html">
            
                    
                    通过JSON查询
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../querying/query-execution.html">
            
                <a href="../querying/query-execution.html">
            
                    
                    查询执行流程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" >
            
                <span>
            
                    
                    主要概念
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.1" data-path="../querying/datasource.html">
            
                <a href="../querying/datasource.html">
            
                    
                    数据源(datasource)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.2" data-path="../querying/joins.html">
            
                <a href="../querying/joins.html">
            
                    
                    联合查询(join)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.3" data-path="../querying/lookups.html">
            
                <a href="../querying/lookups.html">
            
                    
                    字典查询(lookups)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.4" data-path="../querying/multi-value-dimensions.html">
            
                <a href="../querying/multi-value-dimensions.html">
            
                    
                    结构化列值(multi-value-dimensions)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.5" data-path="../querying/multitenancy.html">
            
                <a href="../querying/multitenancy.html">
            
                    
                    多租户
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.6" data-path="../querying/caching.html">
            
                <a href="../querying/caching.html">
            
                    
                    查询缓存
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.7" data-path="../querying/query-context.html">
            
                <a href="../querying/query-context.html">
            
                    
                    查询上下文
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.5" >
            
                <span>
            
                    
                    JSON查询类型
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.5.1" data-path="../querying/timeseriesquery.html">
            
                <a href="../querying/timeseriesquery.html">
            
                    
                    Timeseries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.2" data-path="../querying/topnquery.html">
            
                <a href="../querying/topnquery.html">
            
                    
                    TopN
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.3" data-path="../querying/groupbyquery.html">
            
                <a href="../querying/groupbyquery.html">
            
                    
                    GroupBy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.4" data-path="../querying/scan-query.html">
            
                <a href="../querying/scan-query.html">
            
                    
                    Scan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.5" data-path="../querying/searchquery.html">
            
                <a href="../querying/searchquery.html">
            
                    
                    Search
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.6" data-path="../querying/timeboundaryquery.html">
            
                <a href="../querying/timeboundaryquery.html">
            
                    
                    TimeBoundary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.7" data-path="../querying/segmentmetadataquery.html">
            
                <a href="../querying/segmentmetadataquery.html">
            
                    
                    SegmentMetaData
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.8" data-path="../querying/datasourcemetadataquery.html">
            
                <a href="../querying/datasourcemetadataquery.html">
            
                    
                    DatasourceMetadata
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.6" >
            
                <span>
            
                    
                    JSON查询结构
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.6.1" data-path="../querying/filters.html">
            
                <a href="../querying/filters.html">
            
                    
                    过滤器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.2" data-path="../querying/granularities.html">
            
                <a href="../querying/granularities.html">
            
                    
                    时间粒度
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.3" data-path="../querying/dimensionspecs.html">
            
                <a href="../querying/dimensionspecs.html">
            
                    
                    数据维度
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.4" data-path="../querying/aggregations.html">
            
                <a href="../querying/aggregations.html">
            
                    
                    聚合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.5" data-path="../querying/post-aggregations.html">
            
                <a href="../querying/post-aggregations.html">
            
                    
                    后置聚合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.6" data-path="../misc/math-expr.html">
            
                <a href="../misc/math-expr.html">
            
                    
                    数学函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.7" data-path="../querying/having.html">
            
                <a href="../querying/having.html">
            
                    
                    表达式与函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.8" data-path="../querying/limitspec.html">
            
                <a href="../querying/limitspec.html">
            
                    
                    Having过滤器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.9" data-path="../querying/topnmetricspec.html">
            
                <a href="../querying/topnmetricspec.html">
            
                    
                    TopN排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.10" data-path="../querying/sorting-orders.html">
            
                <a href="../querying/sorting-orders.html">
            
                    
                    排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.11" data-path="../querying/virtual-columns.html">
            
                <a href="../querying/virtual-columns.html">
            
                    
                    虚拟字段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.12" data-path="../development/geo.html">
            
                <a href="../development/geo.html">
            
                    
                    空间过滤
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    配置
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../configuration/">
            
                <a href="../configuration/">
            
                    
                    概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../development/extensions.html">
            
                <a href="../development/extensions.html">
            
                    
                    扩展组件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../configuration/logging.html">
            
                <a href="../configuration/logging.html">
            
                    
                    运行日志
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    运维
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../operations/druid-console.html">
            
                <a href="../operations/druid-console.html">
            
                    
                    Web控制台
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../operations/getting-started.html">
            
                <a href="../operations/getting-started.html">
            
                    
                    快速开始
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.2.1" >
            
                <span>
            
                    
                    安全
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.2.1.1" data-path="../operations/security-overview.html">
            
                <a href="../operations/security-overview.html">
            
                    
                    概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.1.2" data-path="../operations/security-user-auth.html">
            
                <a href="../operations/security-user-auth.html">
            
                    
                    用户认证
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.1.3" data-path="../operations/auth-ldap.html">
            
                <a href="../operations/auth-ldap.html">
            
                    
                    LDAP认证
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.1.4" data-path="../operations/password-provider.html">
            
                <a href="../operations/password-provider.html">
            
                    
                    密码管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.1.5" data-path="../design/auth.html">
            
                <a href="../design/auth.html">
            
                    
                    认证
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.1.6" data-path="../operations/tls-support.html">
            
                <a href="../operations/tls-support.html">
            
                    
                    TLS加密支持
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.2.2" >
            
                <span>
            
                    
                    性能
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.2.2.1" data-path="../operations/basic-cluster-tuning.html">
            
                <a href="../operations/basic-cluster-tuning.html">
            
                    
                    集群调优
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.2.2" data-path="../operations/segment-optimization.html">
            
                <a href="../operations/segment-optimization.html">
            
                    
                    数据段文件优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.2.3" data-path="../operations/http-compression.html">
            
                <a href="../operations/http-compression.html">
            
                    
                    HTTP压缩
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.2.3" data-path="../operations/api-reference.html">
            
                <a href="../operations/api-reference.html">
            
                    
                    API手册
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.4" data-path="../operations/high-availability.html">
            
                <a href="../operations/high-availability.html">
            
                    
                    高可用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.5" data-path="../operations/rolling-updates.html">
            
                <a href="../operations/rolling-updates.html">
            
                    
                    滚动版本升级
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.6" data-path="../operations/rule-configuration.html">
            
                <a href="../operations/rule-configuration.html">
            
                    
                    数据留存规则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.7" data-path="../operations/metrics.html">
            
                <a href="../operations/metrics.html">
            
                    
                    应用指标
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.8" data-path="../operations/alerts.html">
            
                <a href="../operations/alerts.html">
            
                    
                    告警
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.9" data-path="../operations/other-hadoop.html">
            
                <a href="../operations/other-hadoop.html">
            
                    
                    Hadoop相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.10" >
            
                <span>
            
                    
                    其他
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.2.10.1" data-path="../operations/management-uis.html">
            
                <a href="../operations/management-uis.html">
            
                    
                    管理界面
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.10.2" data-path="../operations/dump-segment.html">
            
                <a href="../operations/dump-segment.html">
            
                    
                    导出数据段文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.10.3" data-path="../operations/reset-cluster.html">
            
                <a href="../operations/reset-cluster.html">
            
                    
                    重置集群
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.10.4" data-path="../operations/insert-segment-to-db.html">
            
                <a href="../operations/insert-segment-to-db.html">
            
                    
                    插入数据段文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.10.5" data-path="../operations/pull-deps.html">
            
                <a href="../operations/pull-deps.html">
            
                    
                    pull-deps工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.10.6" data-path="../operations/deep-storage-migration.html">
            
                <a href="../operations/deep-storage-migration.html">
            
                    
                    迁移深度存储
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.10.7" data-path="../operations/export-metadata.html">
            
                <a href="../operations/export-metadata.html">
            
                    
                    导出元数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.10.8" data-path="../operations/metadata-migration.html">
            
                <a href="../operations/metadata-migration.html">
            
                    
                    元数据迁移
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.10.9" data-path="../operations/use_sbt_to_build_fat_jar.html">
            
                <a href="../operations/use_sbt_to_build_fat_jar.html">
            
                    
                    打包fat jar
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                    Druid开发
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../development/overview.html">
            
                <a href="../development/overview.html">
            
                    
                    概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../development/modules.html">
            
                <a href="../development/modules.html">
            
                    
                    模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../development/javascript.html">
            
                <a href="../development/javascript.html">
            
                    
                    javascript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../development/build.html">
            
                <a href="../development/build.html">
            
                    
                    构建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../development/versioning.html">
            
                <a href="../development/versioning.html">
            
                    
                    版本
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="../development/experimental.html">
            
                <a href="../development/experimental.html">
            
                    
                    实验功能
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    其他
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../misc/papers-and-talks.html">
            
                <a href="../misc/papers-and-talks.html">
            
                    
                    论文与演讲
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >编写数据摄入规则</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><ul><li><span class="title-icon "></span><a href="#example-data"><b>1.1. </b>Example data</a></li><li><span class="title-icon "></span><a href="#defining-the-schema"><b>1.2. </b>Defining the schema</a></li><ul><li><span class="title-icon "></span><a href="#datasource-name"><b>1.2.1. </b>Datasource name</a></li><li><span class="title-icon "></span><a href="#time-column"><b>1.2.2. </b>Time column</a></li><li><span class="title-icon "></span><a href="#column-types"><b>1.2.3. </b>Column types</a></li><li><span class="title-icon "></span><a href="#rollup"><b>1.2.4. </b>Rollup</a></li><li><span class="title-icon "></span><a href="#no-rollup"><b>1.2.5. </b>No rollup</a></li><li><span class="title-icon "></span><a href="#define-granularities"><b>1.2.6. </b>Define granularities</a></li></ul><li><span class="title-icon "></span><a href="#define-the-task-type"><b>1.3. </b>Define the task type</a></li><li><span class="title-icon "></span><a href="#define-the-input-source"><b>1.4. </b>Define the input source</a></li><ul><li><span class="title-icon "></span><a href="#define-the-format-of-the-data"><b>1.4.1. </b>Define the format of the data</a></li></ul><li><span class="title-icon "></span><a href="#additional-tuning"><b>1.5. </b>Additional tuning</a></li><li><span class="title-icon "></span><a href="#final-spec"><b>1.6. </b>Final spec</a></li><li><span class="title-icon "></span><a href="#submit-the-task-and-query-the-data"><b>1.7. </b>Submit the task and query the data</a></li></ul></ul></div><a href="#" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
  -->
<p>This tutorial will guide the reader through the process of defining an ingestion spec, pointing out key considerations and guidelines.</p>
<p>For this tutorial, we&apos;ll assume you&apos;ve already downloaded Apache Druid as described in
the <a href="./">single-machine quickstart</a> and have it running on your local machine.</p>
<p>It will also be helpful to have finished <a href="tutorial-batch.html">Tutorial: Loading a file</a>, <a href="tutorial-query.html">Tutorial: Querying data</a>, and <a href="tutorial-rollup.html">Tutorial: Rollup</a>.</p>
<h2 id="example-data"><a name="example-data" class="anchor-navigation-ex-anchor" href="#example-data"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. Example data</h2>
<p>Suppose we have the following network flow data:</p>
<ul>
<li><code>srcIP</code>: IP address of sender</li>
<li><code>srcPort</code>: Port of sender</li>
<li><code>dstIP</code>: IP address of receiver</li>
<li><code>dstPort</code>: Port of receiver</li>
<li><code>protocol</code>: IP protocol number</li>
<li><code>packets</code>: number of packets transmitted</li>
<li><code>bytes</code>: number of bytes transmitted</li>
<li><code>cost</code>: the cost of sending the traffic</li>
</ul>
<pre><code class="lang-json">{<span class="hljs-string">&quot;ts&quot;</span>:<span class="hljs-string">&quot;2018-01-01T01:01:35Z&quot;</span>,<span class="hljs-string">&quot;srcIP&quot;</span>:<span class="hljs-string">&quot;1.1.1.1&quot;</span>, <span class="hljs-string">&quot;dstIP&quot;</span>:<span class="hljs-string">&quot;2.2.2.2&quot;</span>, <span class="hljs-string">&quot;srcPort&quot;</span>:<span class="hljs-number">2000</span>, <span class="hljs-string">&quot;dstPort&quot;</span>:<span class="hljs-number">3000</span>, <span class="hljs-string">&quot;protocol&quot;</span>: <span class="hljs-number">6</span>, <span class="hljs-string">&quot;packets&quot;</span>:<span class="hljs-number">10</span>, <span class="hljs-string">&quot;bytes&quot;</span>:<span class="hljs-number">1000</span>, <span class="hljs-string">&quot;cost&quot;</span>: <span class="hljs-number">1.4</span>}
{<span class="hljs-string">&quot;ts&quot;</span>:<span class="hljs-string">&quot;2018-01-01T01:01:51Z&quot;</span>,<span class="hljs-string">&quot;srcIP&quot;</span>:<span class="hljs-string">&quot;1.1.1.1&quot;</span>, <span class="hljs-string">&quot;dstIP&quot;</span>:<span class="hljs-string">&quot;2.2.2.2&quot;</span>, <span class="hljs-string">&quot;srcPort&quot;</span>:<span class="hljs-number">2000</span>, <span class="hljs-string">&quot;dstPort&quot;</span>:<span class="hljs-number">3000</span>, <span class="hljs-string">&quot;protocol&quot;</span>: <span class="hljs-number">6</span>, <span class="hljs-string">&quot;packets&quot;</span>:<span class="hljs-number">20</span>, <span class="hljs-string">&quot;bytes&quot;</span>:<span class="hljs-number">2000</span>, <span class="hljs-string">&quot;cost&quot;</span>: <span class="hljs-number">3.1</span>}
{<span class="hljs-string">&quot;ts&quot;</span>:<span class="hljs-string">&quot;2018-01-01T01:01:59Z&quot;</span>,<span class="hljs-string">&quot;srcIP&quot;</span>:<span class="hljs-string">&quot;1.1.1.1&quot;</span>, <span class="hljs-string">&quot;dstIP&quot;</span>:<span class="hljs-string">&quot;2.2.2.2&quot;</span>, <span class="hljs-string">&quot;srcPort&quot;</span>:<span class="hljs-number">2000</span>, <span class="hljs-string">&quot;dstPort&quot;</span>:<span class="hljs-number">3000</span>, <span class="hljs-string">&quot;protocol&quot;</span>: <span class="hljs-number">6</span>, <span class="hljs-string">&quot;packets&quot;</span>:<span class="hljs-number">30</span>, <span class="hljs-string">&quot;bytes&quot;</span>:<span class="hljs-number">3000</span>, <span class="hljs-string">&quot;cost&quot;</span>: <span class="hljs-number">0.4</span>}
{<span class="hljs-string">&quot;ts&quot;</span>:<span class="hljs-string">&quot;2018-01-01T01:02:14Z&quot;</span>,<span class="hljs-string">&quot;srcIP&quot;</span>:<span class="hljs-string">&quot;1.1.1.1&quot;</span>, <span class="hljs-string">&quot;dstIP&quot;</span>:<span class="hljs-string">&quot;2.2.2.2&quot;</span>, <span class="hljs-string">&quot;srcPort&quot;</span>:<span class="hljs-number">5000</span>, <span class="hljs-string">&quot;dstPort&quot;</span>:<span class="hljs-number">7000</span>, <span class="hljs-string">&quot;protocol&quot;</span>: <span class="hljs-number">6</span>, <span class="hljs-string">&quot;packets&quot;</span>:<span class="hljs-number">40</span>, <span class="hljs-string">&quot;bytes&quot;</span>:<span class="hljs-number">4000</span>, <span class="hljs-string">&quot;cost&quot;</span>: <span class="hljs-number">7.9</span>}
{<span class="hljs-string">&quot;ts&quot;</span>:<span class="hljs-string">&quot;2018-01-01T01:02:29Z&quot;</span>,<span class="hljs-string">&quot;srcIP&quot;</span>:<span class="hljs-string">&quot;1.1.1.1&quot;</span>, <span class="hljs-string">&quot;dstIP&quot;</span>:<span class="hljs-string">&quot;2.2.2.2&quot;</span>, <span class="hljs-string">&quot;srcPort&quot;</span>:<span class="hljs-number">5000</span>, <span class="hljs-string">&quot;dstPort&quot;</span>:<span class="hljs-number">7000</span>, <span class="hljs-string">&quot;protocol&quot;</span>: <span class="hljs-number">6</span>, <span class="hljs-string">&quot;packets&quot;</span>:<span class="hljs-number">50</span>, <span class="hljs-string">&quot;bytes&quot;</span>:<span class="hljs-number">5000</span>, <span class="hljs-string">&quot;cost&quot;</span>: <span class="hljs-number">10.2</span>}
{<span class="hljs-string">&quot;ts&quot;</span>:<span class="hljs-string">&quot;2018-01-01T01:03:29Z&quot;</span>,<span class="hljs-string">&quot;srcIP&quot;</span>:<span class="hljs-string">&quot;1.1.1.1&quot;</span>, <span class="hljs-string">&quot;dstIP&quot;</span>:<span class="hljs-string">&quot;2.2.2.2&quot;</span>, <span class="hljs-string">&quot;srcPort&quot;</span>:<span class="hljs-number">5000</span>, <span class="hljs-string">&quot;dstPort&quot;</span>:<span class="hljs-number">7000</span>, <span class="hljs-string">&quot;protocol&quot;</span>: <span class="hljs-number">6</span>, <span class="hljs-string">&quot;packets&quot;</span>:<span class="hljs-number">60</span>, <span class="hljs-string">&quot;bytes&quot;</span>:<span class="hljs-number">6000</span>, <span class="hljs-string">&quot;cost&quot;</span>: <span class="hljs-number">4.3</span>}
{<span class="hljs-string">&quot;ts&quot;</span>:<span class="hljs-string">&quot;2018-01-01T02:33:14Z&quot;</span>,<span class="hljs-string">&quot;srcIP&quot;</span>:<span class="hljs-string">&quot;7.7.7.7&quot;</span>, <span class="hljs-string">&quot;dstIP&quot;</span>:<span class="hljs-string">&quot;8.8.8.8&quot;</span>, <span class="hljs-string">&quot;srcPort&quot;</span>:<span class="hljs-number">4000</span>, <span class="hljs-string">&quot;dstPort&quot;</span>:<span class="hljs-number">5000</span>, <span class="hljs-string">&quot;protocol&quot;</span>: <span class="hljs-number">17</span>, <span class="hljs-string">&quot;packets&quot;</span>:<span class="hljs-number">100</span>, <span class="hljs-string">&quot;bytes&quot;</span>:<span class="hljs-number">10000</span>, <span class="hljs-string">&quot;cost&quot;</span>: <span class="hljs-number">22.4</span>}
{<span class="hljs-string">&quot;ts&quot;</span>:<span class="hljs-string">&quot;2018-01-01T02:33:45Z&quot;</span>,<span class="hljs-string">&quot;srcIP&quot;</span>:<span class="hljs-string">&quot;7.7.7.7&quot;</span>, <span class="hljs-string">&quot;dstIP&quot;</span>:<span class="hljs-string">&quot;8.8.8.8&quot;</span>, <span class="hljs-string">&quot;srcPort&quot;</span>:<span class="hljs-number">4000</span>, <span class="hljs-string">&quot;dstPort&quot;</span>:<span class="hljs-number">5000</span>, <span class="hljs-string">&quot;protocol&quot;</span>: <span class="hljs-number">17</span>, <span class="hljs-string">&quot;packets&quot;</span>:<span class="hljs-number">200</span>, <span class="hljs-string">&quot;bytes&quot;</span>:<span class="hljs-number">20000</span>, <span class="hljs-string">&quot;cost&quot;</span>: <span class="hljs-number">34.5</span>}
{<span class="hljs-string">&quot;ts&quot;</span>:<span class="hljs-string">&quot;2018-01-01T02:35:45Z&quot;</span>,<span class="hljs-string">&quot;srcIP&quot;</span>:<span class="hljs-string">&quot;7.7.7.7&quot;</span>, <span class="hljs-string">&quot;dstIP&quot;</span>:<span class="hljs-string">&quot;8.8.8.8&quot;</span>, <span class="hljs-string">&quot;srcPort&quot;</span>:<span class="hljs-number">4000</span>, <span class="hljs-string">&quot;dstPort&quot;</span>:<span class="hljs-number">5000</span>, <span class="hljs-string">&quot;protocol&quot;</span>: <span class="hljs-number">17</span>, <span class="hljs-string">&quot;packets&quot;</span>:<span class="hljs-number">300</span>, <span class="hljs-string">&quot;bytes&quot;</span>:<span class="hljs-number">30000</span>, <span class="hljs-string">&quot;cost&quot;</span>: <span class="hljs-number">46.3</span>}
</code></pre>
<p>Save the JSON contents above into a file called <code>ingestion-tutorial-data.json</code> in <code>quickstart/</code>.</p>
<p>Let&apos;s walk through the process of defining an ingestion spec that can load this data.</p>
<p>For this tutorial, we will be using the native batch indexing task. When using other task types, some aspects of the ingestion spec will differ, and this tutorial will point out such areas.</p>
<h2 id="defining-the-schema"><a name="defining-the-schema" class="anchor-navigation-ex-anchor" href="#defining-the-schema"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. Defining the schema</h2>
<p>The core element of a Druid ingestion spec is the <code>dataSchema</code>. The <code>dataSchema</code> defines how to parse input data into a set of columns that will be stored in Druid.</p>
<p>Let&apos;s start with an empty <code>dataSchema</code> and add fields to it as we progress through the tutorial.</p>
<p>Create a new file called <code>ingestion-tutorial-index.json</code> in <code>quickstart/</code> with the following contents:</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;dataSchema&quot;</span> : {}
</code></pre>
<p>We will be making successive edits to this ingestion spec as we progress through the tutorial.</p>
<h3 id="datasource-name"><a name="datasource-name" class="anchor-navigation-ex-anchor" href="#datasource-name"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.1. Datasource name</h3>
<p>The datasource name is specified by the <code>dataSource</code> parameter in the <code>dataSchema</code>.</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;dataSchema&quot;</span> : {
  <span class="hljs-string">&quot;dataSource&quot;</span> : <span class="hljs-string">&quot;ingestion-tutorial&quot;</span>,
}
</code></pre>
<p>Let&apos;s call the tutorial datasource <code>ingestion-tutorial</code>.</p>
<h3 id="time-column"><a name="time-column" class="anchor-navigation-ex-anchor" href="#time-column"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.2. Time column</h3>
<p>The <code>dataSchema</code> needs to know how to extract the main timestamp field from the input data.</p>
<p>The timestamp column in our input data is named &quot;ts&quot;, containing ISO 8601 timestamps, so let&apos;s add a <code>timestampSpec</code> with that information to the <code>dataSchema</code>:</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;dataSchema&quot;</span> : {
  <span class="hljs-string">&quot;dataSource&quot;</span> : <span class="hljs-string">&quot;ingestion-tutorial&quot;</span>,
  <span class="hljs-string">&quot;timestampSpec&quot;</span> : {
    <span class="hljs-string">&quot;format&quot;</span> : <span class="hljs-string">&quot;iso&quot;</span>,
    <span class="hljs-string">&quot;column&quot;</span> : <span class="hljs-string">&quot;ts&quot;</span>
  }
}
</code></pre>
<h3 id="column-types"><a name="column-types" class="anchor-navigation-ex-anchor" href="#column-types"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.3. Column types</h3>
<p>Now that we&apos;ve defined the time column, let&apos;s look at definitions for other columns.</p>
<p>Druid supports the following column types: String, Long, Float, Double. We will see how these are used in the following sections.</p>
<p>Before we move on to how we define our other non-time columns, let&apos;s discuss <code>rollup</code> first.</p>
<h3 id="rollup"><a name="rollup" class="anchor-navigation-ex-anchor" href="#rollup"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.4. Rollup</h3>
<p>When ingesting data, we must consider whether we wish to use rollup or not.</p>
<ul>
<li><p>If rollup is enabled, we will need to separate the input columns into two categories, &quot;dimensions&quot; and &quot;metrics&quot;. &quot;Dimensions&quot; are the grouping columns for rollup, while &quot;metrics&quot; are the columns that will be aggregated.</p>
</li>
<li><p>If rollup is disabled, then all columns are treated as &quot;dimensions&quot; and no pre-aggregation occurs.</p>
</li>
</ul>
<p>For this tutorial, let&apos;s enable rollup. This is specified with a <code>granularitySpec</code> on the <code>dataSchema</code>.</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;dataSchema&quot;</span> : {
  <span class="hljs-string">&quot;dataSource&quot;</span> : <span class="hljs-string">&quot;ingestion-tutorial&quot;</span>,
  <span class="hljs-string">&quot;timestampSpec&quot;</span> : {
    <span class="hljs-string">&quot;format&quot;</span> : <span class="hljs-string">&quot;iso&quot;</span>,
    <span class="hljs-string">&quot;column&quot;</span> : <span class="hljs-string">&quot;ts&quot;</span>
  },
  <span class="hljs-string">&quot;granularitySpec&quot;</span> : {
    <span class="hljs-string">&quot;rollup&quot;</span> : <span class="hljs-literal">true</span>
  }
}
</code></pre>
<h4 id="choosing-dimensions-and-metrics"><a name="choosing-dimensions-and-metrics" class="anchor-navigation-ex-anchor" href="#choosing-dimensions-and-metrics"><i class="fa fa-link" aria-hidden="true"></i></a>Choosing dimensions and metrics</h4>
<p>For this example dataset, the following is a sensible split for &quot;dimensions&quot; and &quot;metrics&quot;:</p>
<ul>
<li>Dimensions: srcIP, srcPort, dstIP, dstPort, protocol</li>
<li>Metrics: packets, bytes, cost</li>
</ul>
<p>The dimensions here are a group of properties that identify a unidirectional flow of IP traffic, while the metrics represent facts about the IP traffic flow specified by a dimension grouping.</p>
<p>Let&apos;s look at how to define these dimensions and metrics within the ingestion spec.</p>
<h4 id="dimensions"><a name="dimensions" class="anchor-navigation-ex-anchor" href="#dimensions"><i class="fa fa-link" aria-hidden="true"></i></a>Dimensions</h4>
<p>Dimensions are specified with a <code>dimensionsSpec</code> inside the <code>dataSchema</code>.</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;dataSchema&quot;</span> : {
  <span class="hljs-string">&quot;dataSource&quot;</span> : <span class="hljs-string">&quot;ingestion-tutorial&quot;</span>,
  <span class="hljs-string">&quot;timestampSpec&quot;</span> : {
    <span class="hljs-string">&quot;format&quot;</span> : <span class="hljs-string">&quot;iso&quot;</span>,
    <span class="hljs-string">&quot;column&quot;</span> : <span class="hljs-string">&quot;ts&quot;</span>
  },
  <span class="hljs-string">&quot;dimensionsSpec&quot;</span> : {
    <span class="hljs-string">&quot;dimensions&quot;</span>: [
      <span class="hljs-string">&quot;srcIP&quot;</span>,
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;srcPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstIP&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> },
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;protocol&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> }
    ]
  },
  <span class="hljs-string">&quot;granularitySpec&quot;</span> : {
    <span class="hljs-string">&quot;rollup&quot;</span> : <span class="hljs-literal">true</span>
  }
}
</code></pre>
<p>Each dimension has a <code>name</code> and a <code>type</code>, where <code>type</code> can be &quot;long&quot;, &quot;float&quot;, &quot;double&quot;, or &quot;string&quot;.</p>
<p>Note that <code>srcIP</code> is a &quot;string&quot; dimension; for string dimensions, it is enough to specify just a dimension name, since &quot;string&quot; is the default dimension type.</p>
<p>Also note that <code>protocol</code> is a numeric value in the input data, but we are ingesting it as a &quot;string&quot; column; Druid will coerce the input longs to strings during ingestion.</p>
<h5 id="strings-vs-numerics"><a name="strings-vs-numerics" class="anchor-navigation-ex-anchor" href="#strings-vs-numerics"><i class="fa fa-link" aria-hidden="true"></i></a>Strings vs. Numerics</h5>
<p>Should a numeric input be ingested as a numeric dimension or as a string dimension?</p>
<p>Numeric dimensions have the following pros/cons relative to String dimensions:</p>
<ul>
<li>Pros: Numeric representation can result in smaller column sizes on disk and lower processing overhead when reading values from the column</li>
<li>Cons: Numeric dimensions do not have indices, so filtering on them will often be slower than filtering on an equivalent String dimension (which has bitmap indices)</li>
</ul>
<h4 id="metrics"><a name="metrics" class="anchor-navigation-ex-anchor" href="#metrics"><i class="fa fa-link" aria-hidden="true"></i></a>Metrics</h4>
<p>Metrics are specified with a <code>metricsSpec</code> inside the <code>dataSchema</code>:</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;dataSchema&quot;</span> : {
  <span class="hljs-string">&quot;dataSource&quot;</span> : <span class="hljs-string">&quot;ingestion-tutorial&quot;</span>,
  <span class="hljs-string">&quot;timestampSpec&quot;</span> : {
    <span class="hljs-string">&quot;format&quot;</span> : <span class="hljs-string">&quot;iso&quot;</span>,
    <span class="hljs-string">&quot;column&quot;</span> : <span class="hljs-string">&quot;ts&quot;</span>
  },
  <span class="hljs-string">&quot;dimensionsSpec&quot;</span> : {
    <span class="hljs-string">&quot;dimensions&quot;</span>: [
      <span class="hljs-string">&quot;srcIP&quot;</span>,
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;srcPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstIP&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> },
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;protocol&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> }
    ]
  },
  <span class="hljs-string">&quot;metricsSpec&quot;</span> : [
    { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;count&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;count&quot;</span> },
    { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;longSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;packets&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;packets&quot;</span> },
    { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;longSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;bytes&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;bytes&quot;</span> },
    { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;doubleSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;cost&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;cost&quot;</span> }
  ],
  <span class="hljs-string">&quot;granularitySpec&quot;</span> : {
    <span class="hljs-string">&quot;rollup&quot;</span> : <span class="hljs-literal">true</span>
  }
}
</code></pre>
<p>When defining a metric, it is necessary to specify what type of aggregation should be performed on that column during rollup.</p>
<p>Here we have defined long sum aggregations on the two long metric columns, <code>packets</code> and <code>bytes</code>, and a double sum aggregation for the <code>cost</code> column.</p>
<p>Note that the <code>metricsSpec</code> is on a different nesting level than <code>dimensionSpec</code> or <code>parseSpec</code>; it belongs on the same nesting level as <code>parser</code> within the <code>dataSchema</code>.</p>
<p>Note that we have also defined a <code>count</code> aggregator. The count aggregator will track how many rows in the original input data contributed to a &quot;rolled up&quot; row in the final ingested data.</p>
<h3 id="no-rollup"><a name="no-rollup" class="anchor-navigation-ex-anchor" href="#no-rollup"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.5. No rollup</h3>
<p>If we were not using rollup, all columns would be specified in the <code>dimensionsSpec</code>, e.g.:</p>
<pre><code class="lang-json">      <span class="hljs-string">&quot;dimensionsSpec&quot;</span> : {
        <span class="hljs-string">&quot;dimensions&quot;</span>: [
          <span class="hljs-string">&quot;srcIP&quot;</span>,
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;srcPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstIP&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> },
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;protocol&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> },
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;packets&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;bytes&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;srcPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;double&quot;</span> }
        ]
      },
</code></pre>
<h3 id="define-granularities"><a name="define-granularities" class="anchor-navigation-ex-anchor" href="#define-granularities"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.6. Define granularities</h3>
<p>At this point, we are done defining the <code>parser</code> and <code>metricsSpec</code> within the <code>dataSchema</code> and we are almost done writing the ingestion spec.</p>
<p>There are some additional properties we need to set in the <code>granularitySpec</code>:</p>
<ul>
<li>Type of granularitySpec: <code>uniform</code> and <code>arbitrary</code> are the two supported types. For this tutorial, we will use a <code>uniform</code> granularity spec, where all segments have uniform interval sizes (for example, all segments cover an hour&apos;s worth of data).</li>
<li>The segment granularity: what size of time interval should a single segment contain data for? e.g., <code>DAY</code>, <code>WEEK</code></li>
<li>The bucketing granularity of the timestamps in the time column (referred to as <code>queryGranularity</code>)</li>
</ul>
<h4 id="segment-granularity"><a name="segment-granularity" class="anchor-navigation-ex-anchor" href="#segment-granularity"><i class="fa fa-link" aria-hidden="true"></i></a>Segment granularity</h4>
<p>Segment granularity is configured by the <code>segmentGranularity</code> property in the <code>granularitySpec</code>. For this tutorial, we&apos;ll create hourly segments:</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;dataSchema&quot;</span> : {
  <span class="hljs-string">&quot;dataSource&quot;</span> : <span class="hljs-string">&quot;ingestion-tutorial&quot;</span>,
  <span class="hljs-string">&quot;timestampSpec&quot;</span> : {
    <span class="hljs-string">&quot;format&quot;</span> : <span class="hljs-string">&quot;iso&quot;</span>,
    <span class="hljs-string">&quot;column&quot;</span> : <span class="hljs-string">&quot;ts&quot;</span>
  },
  <span class="hljs-string">&quot;dimensionsSpec&quot;</span> : {
    <span class="hljs-string">&quot;dimensions&quot;</span>: [
      <span class="hljs-string">&quot;srcIP&quot;</span>,
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;srcPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstIP&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> },
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;protocol&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> }
    ]
  },
  <span class="hljs-string">&quot;metricsSpec&quot;</span> : [
    { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;count&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;count&quot;</span> },
    { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;longSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;packets&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;packets&quot;</span> },
    { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;longSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;bytes&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;bytes&quot;</span> },
    { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;doubleSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;cost&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;cost&quot;</span> }
  ],
  <span class="hljs-string">&quot;granularitySpec&quot;</span> : {
    <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;uniform&quot;</span>,
    <span class="hljs-string">&quot;segmentGranularity&quot;</span> : <span class="hljs-string">&quot;HOUR&quot;</span>,
    <span class="hljs-string">&quot;rollup&quot;</span> : <span class="hljs-literal">true</span>
  }
}
</code></pre>
<p>Our input data has events from two separate hours, so this task will generate two segments.</p>
<h4 id="query-granularity"><a name="query-granularity" class="anchor-navigation-ex-anchor" href="#query-granularity"><i class="fa fa-link" aria-hidden="true"></i></a>Query granularity</h4>
<p>The query granularity is configured by the <code>queryGranularity</code> property in the <code>granularitySpec</code>. For this tutorial, let&apos;s use minute granularity:</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;dataSchema&quot;</span> : {
  <span class="hljs-string">&quot;dataSource&quot;</span> : <span class="hljs-string">&quot;ingestion-tutorial&quot;</span>,
  <span class="hljs-string">&quot;timestampSpec&quot;</span> : {
    <span class="hljs-string">&quot;format&quot;</span> : <span class="hljs-string">&quot;iso&quot;</span>,
    <span class="hljs-string">&quot;column&quot;</span> : <span class="hljs-string">&quot;ts&quot;</span>
  },
  <span class="hljs-string">&quot;dimensionsSpec&quot;</span> : {
    <span class="hljs-string">&quot;dimensions&quot;</span>: [
      <span class="hljs-string">&quot;srcIP&quot;</span>,
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;srcPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstIP&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> },
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;protocol&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> }
    ]
  },
  <span class="hljs-string">&quot;metricsSpec&quot;</span> : [
    { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;count&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;count&quot;</span> },
    { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;longSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;packets&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;packets&quot;</span> },
    { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;longSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;bytes&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;bytes&quot;</span> },
    { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;doubleSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;cost&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;cost&quot;</span> }
  ],
  <span class="hljs-string">&quot;granularitySpec&quot;</span> : {
    <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;uniform&quot;</span>,
    <span class="hljs-string">&quot;segmentGranularity&quot;</span> : <span class="hljs-string">&quot;HOUR&quot;</span>,
    <span class="hljs-string">&quot;queryGranularity&quot;</span> : <span class="hljs-string">&quot;MINUTE&quot;</span>,
    <span class="hljs-string">&quot;rollup&quot;</span> : <span class="hljs-literal">true</span>
  }
}
</code></pre>
<p>To see the effect of the query granularity, let&apos;s look at this row from the raw input data:</p>
<pre><code class="lang-json">{<span class="hljs-string">&quot;ts&quot;</span>:<span class="hljs-string">&quot;2018-01-01T01:03:29Z&quot;</span>,<span class="hljs-string">&quot;srcIP&quot;</span>:<span class="hljs-string">&quot;1.1.1.1&quot;</span>, <span class="hljs-string">&quot;dstIP&quot;</span>:<span class="hljs-string">&quot;2.2.2.2&quot;</span>, <span class="hljs-string">&quot;srcPort&quot;</span>:<span class="hljs-number">5000</span>, <span class="hljs-string">&quot;dstPort&quot;</span>:<span class="hljs-number">7000</span>, <span class="hljs-string">&quot;protocol&quot;</span>: <span class="hljs-number">6</span>, <span class="hljs-string">&quot;packets&quot;</span>:<span class="hljs-number">60</span>, <span class="hljs-string">&quot;bytes&quot;</span>:<span class="hljs-number">6000</span>, <span class="hljs-string">&quot;cost&quot;</span>: <span class="hljs-number">4.3</span>}
</code></pre>
<p>When this row is ingested with minute queryGranularity, Druid will floor the row&apos;s timestamp to minute buckets:</p>
<pre><code class="lang-json">{<span class="hljs-string">&quot;ts&quot;</span>:<span class="hljs-string">&quot;2018-01-01T01:03:00Z&quot;</span>,<span class="hljs-string">&quot;srcIP&quot;</span>:<span class="hljs-string">&quot;1.1.1.1&quot;</span>, <span class="hljs-string">&quot;dstIP&quot;</span>:<span class="hljs-string">&quot;2.2.2.2&quot;</span>, <span class="hljs-string">&quot;srcPort&quot;</span>:<span class="hljs-number">5000</span>, <span class="hljs-string">&quot;dstPort&quot;</span>:<span class="hljs-number">7000</span>, <span class="hljs-string">&quot;protocol&quot;</span>: <span class="hljs-number">6</span>, <span class="hljs-string">&quot;packets&quot;</span>:<span class="hljs-number">60</span>, <span class="hljs-string">&quot;bytes&quot;</span>:<span class="hljs-number">6000</span>, <span class="hljs-string">&quot;cost&quot;</span>: <span class="hljs-number">4.3</span>}
</code></pre>
<h4 id="define-an-interval-batch-only"><a name="define-an-interval-batch-only" class="anchor-navigation-ex-anchor" href="#define-an-interval-batch-only"><i class="fa fa-link" aria-hidden="true"></i></a>Define an interval (batch only)</h4>
<p>For batch tasks, it is necessary to define a time interval. Input rows with timestamps outside of the time interval will not be ingested.</p>
<p>The interval is also specified in the <code>granularitySpec</code>:</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;dataSchema&quot;</span> : {
  <span class="hljs-string">&quot;dataSource&quot;</span> : <span class="hljs-string">&quot;ingestion-tutorial&quot;</span>,
  <span class="hljs-string">&quot;timestampSpec&quot;</span> : {
    <span class="hljs-string">&quot;format&quot;</span> : <span class="hljs-string">&quot;iso&quot;</span>,
    <span class="hljs-string">&quot;column&quot;</span> : <span class="hljs-string">&quot;ts&quot;</span>
  },
  <span class="hljs-string">&quot;dimensionsSpec&quot;</span> : {
    <span class="hljs-string">&quot;dimensions&quot;</span>: [
      <span class="hljs-string">&quot;srcIP&quot;</span>,
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;srcPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstIP&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> },
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
      { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;protocol&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> }
    ]
  },
  <span class="hljs-string">&quot;metricsSpec&quot;</span> : [
    { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;count&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;count&quot;</span> },
    { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;longSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;packets&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;packets&quot;</span> },
    { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;longSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;bytes&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;bytes&quot;</span> },
    { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;doubleSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;cost&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;cost&quot;</span> }
  ],
  <span class="hljs-string">&quot;granularitySpec&quot;</span> : {
    <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;uniform&quot;</span>,
    <span class="hljs-string">&quot;segmentGranularity&quot;</span> : <span class="hljs-string">&quot;HOUR&quot;</span>,
    <span class="hljs-string">&quot;queryGranularity&quot;</span> : <span class="hljs-string">&quot;MINUTE&quot;</span>,
    <span class="hljs-string">&quot;intervals&quot;</span> : [<span class="hljs-string">&quot;2018-01-01/2018-01-02&quot;</span>],
    <span class="hljs-string">&quot;rollup&quot;</span> : <span class="hljs-literal">true</span>
  }
}
</code></pre>
<h2 id="define-the-task-type"><a name="define-the-task-type" class="anchor-navigation-ex-anchor" href="#define-the-task-type"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. Define the task type</h2>
<p>We&apos;ve now finished defining our <code>dataSchema</code>. The remaining steps are to place the <code>dataSchema</code> we created into an ingestion task spec, and specify the input source.</p>
<p>The <code>dataSchema</code> is shared across all task types, but each task type has its own specification format. For this tutorial, we will use the native batch ingestion task:</p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;index_parallel&quot;</span>,
  <span class="hljs-string">&quot;spec&quot;</span> : {
    <span class="hljs-string">&quot;dataSchema&quot;</span> : {
      <span class="hljs-string">&quot;dataSource&quot;</span> : <span class="hljs-string">&quot;ingestion-tutorial&quot;</span>,
      <span class="hljs-string">&quot;timestampSpec&quot;</span> : {
        <span class="hljs-string">&quot;format&quot;</span> : <span class="hljs-string">&quot;iso&quot;</span>,
        <span class="hljs-string">&quot;column&quot;</span> : <span class="hljs-string">&quot;ts&quot;</span>
      },
      <span class="hljs-string">&quot;dimensionsSpec&quot;</span> : {
        <span class="hljs-string">&quot;dimensions&quot;</span>: [
          <span class="hljs-string">&quot;srcIP&quot;</span>,
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;srcPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstIP&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> },
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;protocol&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> }
        ]
      },
      <span class="hljs-string">&quot;metricsSpec&quot;</span> : [
        { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;count&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;count&quot;</span> },
        { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;longSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;packets&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;packets&quot;</span> },
        { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;longSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;bytes&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;bytes&quot;</span> },
        { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;doubleSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;cost&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;cost&quot;</span> }
      ],
      <span class="hljs-string">&quot;granularitySpec&quot;</span> : {
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;uniform&quot;</span>,
        <span class="hljs-string">&quot;segmentGranularity&quot;</span> : <span class="hljs-string">&quot;HOUR&quot;</span>,
        <span class="hljs-string">&quot;queryGranularity&quot;</span> : <span class="hljs-string">&quot;MINUTE&quot;</span>,
        <span class="hljs-string">&quot;intervals&quot;</span> : [<span class="hljs-string">&quot;2018-01-01/2018-01-02&quot;</span>],
        <span class="hljs-string">&quot;rollup&quot;</span> : <span class="hljs-literal">true</span>
      }
    }
  }
}
</code></pre>
<h2 id="define-the-input-source"><a name="define-the-input-source" class="anchor-navigation-ex-anchor" href="#define-the-input-source"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. Define the input source</h2>
<p>Now let&apos;s define our input source, which is specified in an <code>ioConfig</code> object. Each task type has its own type of <code>ioConfig</code>. To read input data, we need to specify an <code>inputSource</code>. The example netflow data we saved earlier needs to be read from a local file, which is configured below:</p>
<pre><code class="lang-json">    <span class="hljs-string">&quot;ioConfig&quot;</span> : {
      <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;index_parallel&quot;</span>,
      <span class="hljs-string">&quot;inputSource&quot;</span> : {
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;local&quot;</span>,
        <span class="hljs-string">&quot;baseDir&quot;</span> : <span class="hljs-string">&quot;quickstart/&quot;</span>,
        <span class="hljs-string">&quot;filter&quot;</span> : <span class="hljs-string">&quot;ingestion-tutorial-data.json&quot;</span>
      }
    }
</code></pre>
<h3 id="define-the-format-of-the-data"><a name="define-the-format-of-the-data" class="anchor-navigation-ex-anchor" href="#define-the-format-of-the-data"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.1. Define the format of the data</h3>
<p>Since our input data is represented as JSON strings, we&apos;ll use a <code>inputFormat</code> to <code>json</code> format:</p>
<pre><code class="lang-json">    <span class="hljs-string">&quot;ioConfig&quot;</span> : {
      <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;index_parallel&quot;</span>,
      <span class="hljs-string">&quot;inputSource&quot;</span> : {
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;local&quot;</span>,
        <span class="hljs-string">&quot;baseDir&quot;</span> : <span class="hljs-string">&quot;quickstart/&quot;</span>,
        <span class="hljs-string">&quot;filter&quot;</span> : <span class="hljs-string">&quot;ingestion-tutorial-data.json&quot;</span>
      },
      <span class="hljs-string">&quot;inputFormat&quot;</span> : {
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;json&quot;</span>
      }
    }
</code></pre>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;index_parallel&quot;</span>,
  <span class="hljs-string">&quot;spec&quot;</span> : {
    <span class="hljs-string">&quot;dataSchema&quot;</span> : {
      <span class="hljs-string">&quot;dataSource&quot;</span> : <span class="hljs-string">&quot;ingestion-tutorial&quot;</span>,
      <span class="hljs-string">&quot;timestampSpec&quot;</span> : {
        <span class="hljs-string">&quot;format&quot;</span> : <span class="hljs-string">&quot;iso&quot;</span>,
        <span class="hljs-string">&quot;column&quot;</span> : <span class="hljs-string">&quot;ts&quot;</span>
      },
      <span class="hljs-string">&quot;dimensionsSpec&quot;</span> : {
        <span class="hljs-string">&quot;dimensions&quot;</span>: [
          <span class="hljs-string">&quot;srcIP&quot;</span>,
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;srcPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstIP&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> },
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;protocol&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> }
        ]
      },
      <span class="hljs-string">&quot;metricsSpec&quot;</span> : [
        { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;count&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;count&quot;</span> },
        { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;longSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;packets&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;packets&quot;</span> },
        { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;longSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;bytes&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;bytes&quot;</span> },
        { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;doubleSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;cost&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;cost&quot;</span> }
      ],
      <span class="hljs-string">&quot;granularitySpec&quot;</span> : {
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;uniform&quot;</span>,
        <span class="hljs-string">&quot;segmentGranularity&quot;</span> : <span class="hljs-string">&quot;HOUR&quot;</span>,
        <span class="hljs-string">&quot;queryGranularity&quot;</span> : <span class="hljs-string">&quot;MINUTE&quot;</span>,
        <span class="hljs-string">&quot;intervals&quot;</span> : [<span class="hljs-string">&quot;2018-01-01/2018-01-02&quot;</span>],
        <span class="hljs-string">&quot;rollup&quot;</span> : <span class="hljs-literal">true</span>
      }
    },
    <span class="hljs-string">&quot;ioConfig&quot;</span> : {
      <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;index_parallel&quot;</span>,
      <span class="hljs-string">&quot;inputSource&quot;</span> : {
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;local&quot;</span>,
        <span class="hljs-string">&quot;baseDir&quot;</span> : <span class="hljs-string">&quot;quickstart/&quot;</span>,
        <span class="hljs-string">&quot;filter&quot;</span> : <span class="hljs-string">&quot;ingestion-tutorial-data.json&quot;</span>
      },
      <span class="hljs-string">&quot;inputFormat&quot;</span> : {
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;json&quot;</span>
      }
    }
  }
}
</code></pre>
<h2 id="additional-tuning"><a name="additional-tuning" class="anchor-navigation-ex-anchor" href="#additional-tuning"><i class="fa fa-link" aria-hidden="true"></i></a>1.5. Additional tuning</h2>
<p>Each ingestion task has a <code>tuningConfig</code> section that allows users to tune various ingestion parameters.</p>
<p>As an example, let&apos;s add a <code>tuningConfig</code> that sets a target segment size for the native batch ingestion task:</p>
<pre><code class="lang-json">    <span class="hljs-string">&quot;tuningConfig&quot;</span> : {
      <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;index_parallel&quot;</span>,
      <span class="hljs-string">&quot;maxRowsPerSegment&quot;</span> : <span class="hljs-number">5000000</span>
    }
</code></pre>
<p>Note that each ingestion task has its own type of <code>tuningConfig</code>.</p>
<h2 id="final-spec"><a name="final-spec" class="anchor-navigation-ex-anchor" href="#final-spec"><i class="fa fa-link" aria-hidden="true"></i></a>1.6. Final spec</h2>
<p>We&apos;ve finished defining the ingestion spec, it should now look like the following:</p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;index_parallel&quot;</span>,
  <span class="hljs-string">&quot;spec&quot;</span> : {
    <span class="hljs-string">&quot;dataSchema&quot;</span> : {
      <span class="hljs-string">&quot;dataSource&quot;</span> : <span class="hljs-string">&quot;ingestion-tutorial&quot;</span>,
      <span class="hljs-string">&quot;timestampSpec&quot;</span> : {
        <span class="hljs-string">&quot;format&quot;</span> : <span class="hljs-string">&quot;iso&quot;</span>,
        <span class="hljs-string">&quot;column&quot;</span> : <span class="hljs-string">&quot;ts&quot;</span>
      },
      <span class="hljs-string">&quot;dimensionsSpec&quot;</span> : {
        <span class="hljs-string">&quot;dimensions&quot;</span>: [
          <span class="hljs-string">&quot;srcIP&quot;</span>,
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;srcPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstIP&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> },
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;dstPort&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;long&quot;</span> },
          { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;protocol&quot;</span>, <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;string&quot;</span> }
        ]
      },
      <span class="hljs-string">&quot;metricsSpec&quot;</span> : [
        { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;count&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;count&quot;</span> },
        { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;longSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;packets&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;packets&quot;</span> },
        { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;longSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;bytes&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;bytes&quot;</span> },
        { <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;doubleSum&quot;</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;cost&quot;</span>, <span class="hljs-string">&quot;fieldName&quot;</span> : <span class="hljs-string">&quot;cost&quot;</span> }
      ],
      <span class="hljs-string">&quot;granularitySpec&quot;</span> : {
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;uniform&quot;</span>,
        <span class="hljs-string">&quot;segmentGranularity&quot;</span> : <span class="hljs-string">&quot;HOUR&quot;</span>,
        <span class="hljs-string">&quot;queryGranularity&quot;</span> : <span class="hljs-string">&quot;MINUTE&quot;</span>,
        <span class="hljs-string">&quot;intervals&quot;</span> : [<span class="hljs-string">&quot;2018-01-01/2018-01-02&quot;</span>],
        <span class="hljs-string">&quot;rollup&quot;</span> : <span class="hljs-literal">true</span>
      }
    },
    <span class="hljs-string">&quot;ioConfig&quot;</span> : {
      <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;index_parallel&quot;</span>,
      <span class="hljs-string">&quot;inputSource&quot;</span> : {
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;local&quot;</span>,
        <span class="hljs-string">&quot;baseDir&quot;</span> : <span class="hljs-string">&quot;quickstart/&quot;</span>,
        <span class="hljs-string">&quot;filter&quot;</span> : <span class="hljs-string">&quot;ingestion-tutorial-data.json&quot;</span>
      },
      <span class="hljs-string">&quot;inputFormat&quot;</span> : {
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;json&quot;</span>
      }
    },
    <span class="hljs-string">&quot;tuningConfig&quot;</span> : {
      <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;index_parallel&quot;</span>,
      <span class="hljs-string">&quot;maxRowsPerSegment&quot;</span> : <span class="hljs-number">5000000</span>
    }
  }
}
</code></pre>
<h2 id="submit-the-task-and-query-the-data"><a name="submit-the-task-and-query-the-data" class="anchor-navigation-ex-anchor" href="#submit-the-task-and-query-the-data"><i class="fa fa-link" aria-hidden="true"></i></a>1.7. Submit the task and query the data</h2>
<p>From the apache-druid- package root, run the following command:</p>
<pre><code class="lang-bash">bin/post-index-task --file quickstart/ingestion-tutorial-index.json --url http://localhost:8081
</code></pre>
<p>After the script completes, we will query the data.</p>
<p>Let&apos;s run <code>bin/dsql</code> and issue a <code>select * from &quot;ingestion-tutorial&quot;;</code> query to see what data was ingested.</p>
<pre><code class="lang-bash">$ bin/dsql
Welcome to dsql, the <span class="hljs-built_in">command</span>-line client <span class="hljs-keyword">for</span> Druid SQL.
Type <span class="hljs-string">&quot;\h&quot;</span> <span class="hljs-keyword">for</span> help.
dsql&gt; select * from <span class="hljs-string">&quot;ingestion-tutorial&quot;</span>;

&#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x2502; __time                   &#x2502; bytes &#x2502; cost &#x2502; count &#x2502; dstIP   &#x2502; dstPort &#x2502; packets &#x2502; protocol &#x2502; srcIP   &#x2502; srcPort &#x2502;
&#x251C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2524;
&#x2502; 2018-01-01T01:01:00.000Z &#x2502;  6000 &#x2502;  4.9 &#x2502;     3 &#x2502; 2.2.2.2 &#x2502;    3000 &#x2502;      60 &#x2502; 6        &#x2502; 1.1.1.1 &#x2502;    2000 &#x2502;
&#x2502; 2018-01-01T01:02:00.000Z &#x2502;  9000 &#x2502; 18.1 &#x2502;     2 &#x2502; 2.2.2.2 &#x2502;    7000 &#x2502;      90 &#x2502; 6        &#x2502; 1.1.1.1 &#x2502;    5000 &#x2502;
&#x2502; 2018-01-01T01:03:00.000Z &#x2502;  6000 &#x2502;  4.3 &#x2502;     1 &#x2502; 2.2.2.2 &#x2502;    7000 &#x2502;      60 &#x2502; 6        &#x2502; 1.1.1.1 &#x2502;    5000 &#x2502;
&#x2502; 2018-01-01T02:33:00.000Z &#x2502; 30000 &#x2502; 56.9 &#x2502;     2 &#x2502; 8.8.8.8 &#x2502;    5000 &#x2502;     300 &#x2502; 17       &#x2502; 7.7.7.7 &#x2502;    4000 &#x2502;
&#x2502; 2018-01-01T02:35:00.000Z &#x2502; 30000 &#x2502; 46.3 &#x2502;     1 &#x2502; 8.8.8.8 &#x2502;    5000 &#x2502;     300 &#x2502; 17       &#x2502; 7.7.7.7 &#x2502;    4000 &#x2502;
&#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
Retrieved 5 rows <span class="hljs-keyword">in</span> 0.12s.

dsql&gt;
</code></pre>
<footer class="page-footer"><span class="copyright">Copyright <a target="_blank" href="https://druid.org.cn">druid.org.cn</a> 2021 .&#x672C;&#x6587;&#x7FFB;&#x8BD1;&#x81EA;Apache Druid&#xFF0C;<a href="https://github.com/apache/druid/tree/master/docs/tutorials/tutorial-ingestion-spec.md" target="_blank">&#x9605;&#x8BFB;&#x539F;&#x6587;</a> </span><span class="footer-modification">&#x66F4;&#x65B0;&#x4E8E;&#xFF1A;
2021-03-09 21:27:36
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="tutorial-delete-data.html" class="navigation navigation-prev " aria-label="Previous page: 删除数据">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="tutorial-transform-spec.html" class="navigation navigation-next " aria-label="Next page: 转换摄入数据">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"id":"tutorial-ingestion-spec","title":"编写数据摄入规则","sidebar_label":"Writing an ingestion spec","level":"1.3.10","depth":2,"next":{"title":"转换摄入数据","level":"1.3.11","depth":2,"path":"tutorials/tutorial-transform-spec.md","ref":"tutorials/tutorial-transform-spec.md","articles":[]},"previous":{"title":"删除数据","level":"1.3.9","depth":2,"path":"tutorials/tutorial-delete-data.md","ref":"tutorials/tutorial-delete-data.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["-search","highlight","livereload","search-pro","code","tbfed-pagefooter","anchor-navigation-ex","auto-scroll-table","hide-element","github"],"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright <a target=\"_blank\" href=\"https://druid.org.cn\">druid.org.cn</a> 2021 .本文翻译自Apache Druid，<a href=\"https://github.com/apache/druid/tree/master/docs/{{file.path}}\">阅读原文</a>","modify_label":"更新于：","modify_format":"YYYY-MM-DD HH:mm:ss"},"github":{"url":"https://github.com/apache/druid"},"livereload":{},"search-pro":{},"auto-scroll-table":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"code":{"copyButtons":true},"hide-element":{"elements":[".gitbook-link"]},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"tutorials/tutorial-ingestion-spec.md","mtime":"2021-03-09T13:27:36.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-04-24T03:56:48.676Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-auto-scroll-table/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

